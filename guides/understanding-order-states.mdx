---
title: "Understanding Order Status"
description: "A comprehensive guide to order lifecycle states and what to expect when failures occur"
---

<Note>
  Every order follows a predictable lifecycle. Understanding each state—both
  successful and failed—helps you build robust integrations and set proper
  customer expectations.
</Note>

## Order Lifecycle Overview

Orders in the Stable Sea Terminal API progress through a series of states from creation to completion. While most orders complete successfully, various factors can cause failures at different stages.

<Warning>
  Order states are immutable once reached. Failed orders cannot be "fixed" in
  place—they require new quotes and orders to retry the transaction.
</Warning>

## Just-in-Time Funding & Timing Considerations

The Stable Sea API uses **just-in-time (JIT) funding**, meaning customers send payment **after** creating an order from a quote. This creates a time-sensitive window where several factors can impact success:

### Why Timing Matters

- **Quote Submission**: Quotes have a `submission_expires_at` timestamp (a few minutes to create an order)
- **Funding Window**: Orders have a `funding_expires_at` timestamp (a few minutes to send payment)
- **Market Protection**: Exchange rates are locked during these windows to protect against volatility
- **Liquidity Management**: Liquidity providers reserve capacity based on quote timing

### Common Timing Challenges

**Blockchain Congestion** is the most frequent cause of funding timeouts when customers send payment after creating an order but blockchain delays prevent confirmation before the quote expires.

**Why this happens:**

- High network activity delays transaction confirmation
- Customer sets low gas fees to save money
- Network validators prioritize higher-fee transactions
- L1 networks (Ethereum) more susceptible than L2s (Solana)

Understanding this timing dynamic is crucial for setting proper customer expectations and choosing appropriate payment methods.

## Successful Order States

### STEP_1_AWAITING_FUNDING

**What's happening:** Order created, waiting for customer to send funds

The order exists but no payment has been detected yet. This is the initial state after order creation.

**What to expect:**

- Order will remain in this state until funds arrive
- Quote expiration timer is counting down (`funding_expires_at`)
- Customer should send payment to the provided address/details
- Status will automatically advance when payment is detected

**Typical duration:** A few minutes (limited by quote expiration)

### STEP_2_FILLING_FX

**What's happening:** Funds received, foreign exchange is being processed

Payment has been detected and confirmed. The liquidity provider is now executing the currency exchange.

**What to expect:**

- Funds are locked and being processed
- Exchange rate is now fixed at the quoted rate
- Liquidity provider is sourcing the destination currency
- No customer action required

**Typical duration:** 2-15 minutes during business hours

### STEP_3_SETTLING_PAYOUT

**What's happening:** Exchange complete, settling final payout

The FX conversion is done. Funds are being sent to the customer's destination payment instrument.

**What to expect:**

- Destination currency has been secured
- Payout is being processed to customer's account
- Settlement time depends on destination payment method
- Status will advance to completed once settlement confirms

**Typical duration:** Minutes to 1 business day (varies by payment method)

### STEP_4_COMPLETED

**What's happening:** Order successfully completed

Terminal success state. Funds have been delivered to the customer's destination account.

**What to expect:**

- Customer has received funds in their destination account
- Order is finalized and cannot be modified
- All fees and exchange rates are final
- Transaction is complete

**This is the terminal success state**

## Failure States

Not every order reaches completion. Here's what happens when orders fail and why these failures occur.

### FAILED_FUNDING_EXPIRED

**Why this happens:** Customer funds arrive after the quote expiration time

This is the most common failure scenario. Quotes have a limited time window (`funding_expires_at`) during which funding must arrive.

**Common causes:**

- **Blockchain congestion** - High network activity delays transaction confirmation
- **Low gas fees** - Customer sets insufficient gas, causing slow processing
- **Customer delay** - Taking too long to send payment after order creation
- **Network timing** - Weekend/holiday periods when quotes may expire during off-hours

**What happens:**

- Order cannot be recovered or extended
- Customer must create a new quote and order to retry
- Original exchange rate is no longer guaranteed
- If funds arrive later, they may need to be refunded

### FAILED_DECLINED_BY_LIQ_PROVIDER

**Why this happens:** Liquidity provider rejects the order during processing

This is a discretionary rejection by the liquidity provider during the FX filling stage.

**Common causes:**

- **Risk assessment** - LP identifies unusual transaction patterns
- **Liquidity constraints** - Insufficient inventory for the requested currency pair
- **Market volatility** - Extreme market conditions trigger risk controls
- **Technical issues** - LP system problems prevent execution

**What happens:**

- Occurs during the FX filling stage (STEP_2)
- Customer funds are typically refunded automatically
- Rare occurrence under normal conditions
- May need to try different offering if recurring

### FAILED_REFUND_REQUESTED

**Why this happens:** Customer or system initiates a refund request

A refund has been requested before the order completed successfully.

**Common causes:**

- **Customer change of mind** - No longer wants the transaction
- **Error correction** - Customer realizes they made a mistake
- **Emergency situations** - Customer needs funds returned urgently
- **System triggers** - Automatic refund for edge cases or compliance

**What happens:**

- Only possible during early stages (before final settlement)
- Refund process begins immediately upon request
- Order cannot be resumed once refund is initiated
- Moves to FAILED_REFUND_PROCESSED upon completion

### FAILED_REFUND_PROCESSED

**Why this happens:** Refund has been completed and settled

Terminal failure state indicating the refund has been successfully processed.

**What happens:**

- Customer has received their refund
- Order is permanently closed
- Customer can create new order if still needed

**This is a terminal failure state**

## What to Expect with Failed Orders

When orders fail, the system handles recovery automatically:

- **FAILED_FUNDING_EXPIRED**: Customer must create new quote and order to retry
- **FAILED_DECLINED_BY_LIQ_PROVIDER**: Automatic refund typically initiated
- **FAILED_REFUND_REQUESTED**: Refund process begins immediately
- **FAILED_REFUND_PROCESSED**: Customer has received refund, order closed

Some orders may have automatic retry mechanisms where a new order is created automatically when certain failures occur.

## Key Takeaways

<Note>
  **Remember:** Order states reflect real-world payment and settlement
  processes. Understanding each state helps you set proper customer expectations
  and handle edge cases gracefully.
</Note>

- **JIT funding creates timing challenges** - blockchain congestion is the most common cause of failures
- **Each state represents a specific stage** in the payment and settlement process
- **Failed orders are recoverable** through new quotes, not by modifying existing orders
- **Timing matters most** for STEP_1_AWAITING_FUNDING due to quote expiration
- **Automatic processes handle** most failure scenarios and refunds

Understanding these states helps you communicate clearly with customers about where their order stands and what to expect next.
